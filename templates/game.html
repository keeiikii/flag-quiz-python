<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›½æ——ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ  - ãƒ—ãƒ¬ã‚¤ä¸­</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ´ å›½æ——ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ  ğŸŒ</h1>
        </header>

        <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="message message-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <main class="game-layout">
            <!-- å·¦ãƒ‘ãƒãƒ«: å›½æ——ã¨çµ±è¨ˆ -->
            <div class="left-panel">
                <div class="flag-section">
                    <div class="flag-container">
                        <img src="{{ session.country_flag }}" alt="å›½æ——" class="flag-image">
                        <p class="flag-caption">ã“ã®å›½ã¯ã©ã“ã§ã—ã‚‡ã†ï¼Ÿ</p>
                    </div>
                </div>

                <div class="stats-section">
                    <div class="stat-item">
                        <span class="stat-label">æ®‹ã‚Šå›ç­”:</span>
                        <span class="stat-value">{{ session.answers_left }}/2</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">æ®‹ã‚Šè³ªå•:</span>
                        <span class="stat-value">{{ session.questions_left }}/10</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ãƒ’ãƒ³ãƒˆ:</span>
                        <span class="stat-value">{{ 3 - session.hints_used|length }}/3</span>
                    </div>
                </div>

                <div class="control-section">
                    <form method="POST" action="{{ url_for('reset_game') }}">
                        <button type="submit" class="btn btn-secondary">
                            ğŸ”„ ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
                        </button>
                    </form>
                </div>
            </div>

            <!-- å³ãƒ‘ãƒãƒ«: ã‚²ãƒ¼ãƒ æ“ä½œ -->
            <div class="right-panel">
                <!-- ãƒ’ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <section class="game-section">
                    <h3>ğŸ’¡ ãƒ’ãƒ³ãƒˆ</h3>
                    <div class="hint-buttons">
                        <form method="POST" action="{{ url_for('get_hint') }}" style="display: inline;">
                            <input type="hidden" name="hint_type" value="ä¸»é£Ÿ">
                            <button type="submit" class="btn btn-hint" 
                                    {% if 'ä¸»é£Ÿ' in session.hints_used %}disabled{% endif %}>
                                ğŸš ä¸»é£Ÿ
                            </button>
                        </form>
                        
                        <form method="POST" action="{{ url_for('get_hint') }}" style="display: inline;">
                            <input type="hidden" name="hint_type" value="é¢ç©">
                            <button type="submit" class="btn btn-hint"
                                    {% if 'é¢ç©' in session.hints_used %}disabled{% endif %}>
                                ğŸ“ é¢ç©
                            </button>
                        </form>
                        
                        <form method="POST" action="{{ url_for('get_hint') }}" style="display: inline;">
                            <input type="hidden" name="hint_type" value="è¨€èª">
                            <button type="submit" class="btn btn-hint"
                                    {% if 'è¨€èª' in session.hints_used %}disabled{% endif %}>
                                ğŸ—£ï¸ è¨€èª
                            </button>
                        </form>
                    </div>
                    
                    {% if session.current_hint %}
                        <div class="hint-display">
                            {{ session.current_hint }}
                        </div>
                    {% endif %}
                </section>

                <!-- è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <section class="game-section">
                    <h3>â“ è³ªå• (ã¯ã„/ã„ã„ãˆå½¢å¼)</h3>
                    
                    {% if session.questions_left > 0 %}
                        <form method="POST" action="{{ url_for('ask_question') }}" class="question-form">
                            <div class="input-group">
                                <input type="text" name="question" 
                                       placeholder="ä¾‹: ã“ã®å›½ã¯ã‚¢ã‚¸ã‚¢ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ" 
                                       required class="input-field">
                                <button type="submit" class="btn btn-primary">ğŸ“¤ è³ªå•ã™ã‚‹</button>
                            </div>
                        </form>
                    {% else %}
                        <p class="warning">è³ªå•å›æ•°ãŒæ®‹ã£ã¦ã„ã¾ã›ã‚“</p>
                    {% endif %}

                    <!-- è³ªå•å±¥æ­´ -->
                    {% if session.question_log %}
                        <div class="question-log">
                            <h4>ğŸ“‹ è³ªå•å±¥æ­´</h4>
                            <div class="log-content">
                                {% for log in session.question_log %}
                                    <div class="log-entry">{{ log }}</div>
                                {% endfor %}
                            </div>
                        </div>
                    {% endif %}
                </section>

                <!-- å›ç­”ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <section class="game-section">
                    <h3>ğŸ¯ å›ç­”</h3>
                    
                    {% if session.answers_left > 0 %}
                        <form method="POST" action="{{ url_for('submit_answer') }}" class="answer-form">
                            <div class="input-group">
                                <input type="text" name="answer" 
                                       placeholder="å›½åã‚’æ—¥æœ¬èªã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šæ—¥æœ¬ï¼‰" 
                                       required class="input-field">
                                <button type="submit" class="btn btn-success">âœ… å›ç­”ã™ã‚‹</button>
                            </div>
                        </form>
                    {% else %}
                        <p class="warning">å›ç­”å›æ•°ãŒæ®‹ã£ã¦ã„ã¾ã›ã‚“</p>
                    {% endif %}
                </section>
            </div>
        </main>
    </div>
</body>
</html>